---
- when: undercloud_type == "baremetal"
  block:

    - name: "Push baremetal instackenv.json"
      copy:
        src: "{{ baremetal_instackenv }}"
        dest: "{{ working_dir }}/instackenv.json"

    - name: "Push network-environment.yaml"
      copy:
        src: "{{ baremetal_network_environment }}"
        dest: "{{ working_dir }}/network-environment.yaml"

    - name: "Push baremetal nic-configs directory (if defined)"
      copy:
        src: "{{ baremetal_nic_configs }}"
        dest: "{{ working_dir }}"
      when: baremetal_nic_configs is defined

- name: Create overcloud custom tht script
  template:
    src: "{{ overcloud_custom_tht_script }}"
    dest: "{{ working_dir }}/overcloud-custom-tht-script.sh"
    mode: 0755

- name: Checkout custom tht heat templates from src
  shell: |
    {{ working_dir }}/overcloud-custom-tht-script.sh > \
    {{ overcloud_custom_tht_log }} 2>&1


